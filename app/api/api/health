// src/app/api/health/route.ts
import { NextRequest } from 'next/server';
import { getClientIP } from '@/lib/api/request';
import { checkApiAuth } from '@/lib/api/auth';
import { createErrorResponse } from '@/lib/api/response';

export async function GET(request: NextRequest) {
  const ip = getClientIP(request);
  const auth = checkApiAuth(request);

  return Response.json({
    status: 'ok',
    timestamp: new Date().toISOString(),
    env: process.env.NODE_ENV,
    ip,
    auth: auth.authorized ? 'valid' : 'invalid',
    version: '1.0.0',
    // Add DB, Redis, etc. checks here
  });
}