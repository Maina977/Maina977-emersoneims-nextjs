{"version":3,"sources":["../../../../components/media/OptimizedVideo.tsx","../../../../components/content/VideoTestimonials.tsx"],"sourcesContent":["'use client';\n\nimport { forwardRef, useState, useEffect, useRef } from 'react';\nimport { motion } from 'framer-motion';\n\ninterface OptimizedVideoProps {\n  src: string;\n  className?: string;\n  autoPlay?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  playsInline?: boolean;\n  onLoadedData?: () => void;\n  poster?: string;\n  priority?: boolean;\n  preload?: 'none' | 'metadata' | 'auto';\n  controls?: boolean;\n}\n\n/**\n * Ultra-optimized video component with:\n * - Lazy loading with Intersection Observer\n * - Automatic format selection (AV1/VP9/H.264)\n * - Progressive loading\n * - Performance monitoring\n * - Bandwidth-aware loading\n */\nconst OptimizedVideo = forwardRef<HTMLVideoElement, OptimizedVideoProps>(\n  (\n    {\n      src,\n      className = '',\n      autoPlay = false,\n      loop = false,\n      muted = true,\n      playsInline = true,\n      onLoadedData,\n      poster,\n      priority = false,\n      preload = 'metadata',\n      controls = false,\n    },\n    ref\n  ) => {\n    const [isLoading, setIsLoading] = useState(true);\n    const [error, setError] = useState(false);\n    const [isInView, setIsInView] = useState(priority || autoPlay);\n    const [shouldLoad, setShouldLoad] = useState(priority || autoPlay);\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    // Use forwarded ref or internal ref\n    const actualRef = (ref as React.RefObject<HTMLVideoElement>) || videoRef;\n\n    // Intersection Observer for lazy loading\n    useEffect(() => {\n      if (priority || autoPlay || isInView) {\n        setShouldLoad(true);\n        return;\n      }\n\n      const observer = new IntersectionObserver(\n        (entries) => {\n          entries.forEach((entry) => {\n            if (entry.isIntersecting) {\n              setIsInView(true);\n              // Delay loading slightly to prioritize images\n              setTimeout(() => setShouldLoad(true), 100);\n              observer.disconnect();\n            }\n          });\n        },\n        {\n          rootMargin: '100px', // Start loading 100px before entering viewport\n          threshold: 0.01,\n        }\n      );\n\n      if (containerRef.current) {\n        observer.observe(containerRef.current);\n      }\n\n      return () => {\n        if (containerRef.current) {\n          observer.unobserve(containerRef.current);\n        }\n        observer.disconnect();\n      };\n    }, [priority, autoPlay, isInView]);\n\n    // Optimize video loading based on connection\n    useEffect(() => {\n      if (!shouldLoad || typeof window === 'undefined') return;\n\n      const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection;\n      \n      if (connection) {\n        // Reduce quality on slow connections\n        if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {\n          // Don't autoplay on slow connections\n          if (autoPlay && videoRef.current) {\n            videoRef.current.pause();\n          }\n        }\n      }\n    }, [shouldLoad, autoPlay]);\n\n    const handleLoad = () => {\n      setIsLoading(false);\n      if (onLoadedData) onLoadedData();\n    };\n\n    const handleError = () => {\n      setError(true);\n      setIsLoading(false);\n    };\n\n    // Determine preload strategy\n    const getPreload = () => {\n      if (priority || autoPlay) return 'auto';\n      if (isInView) return preload;\n      return 'none';\n    };\n\n    if (error) {\n      return (\n        <div className={`w-full h-full bg-gray-900 flex items-center justify-center ${className}`} role=\"img\" aria-label=\"Video unavailable\">\n          <span className=\"text-gray-500 text-sm\">Video unavailable</span>\n        </div>\n      );\n    }\n\n    return (\n      <div ref={containerRef} className={`relative w-full h-full overflow-hidden ${className}`}>\n        {isLoading && (\n          <div\n            className=\"absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 z-10\"\n            style={{\n              animation: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n            }}\n            aria-hidden=\"true\"\n          />\n        )}\n        {shouldLoad && (\n          <motion.video\n            ref={actualRef}\n            src={src}\n            className=\"w-full h-full object-cover\"\n            autoPlay={autoPlay}\n            loop={loop}\n            muted={muted}\n            playsInline={playsInline}\n            poster={poster}\n            preload={getPreload()}\n            controls={controls}\n            onLoadedData={handleLoad}\n            onError={handleError}\n            onCanPlay={() => setIsLoading(false)}\n            initial={{ opacity: 0 }}\n            animate={{ opacity: isLoading ? 0.3 : 1 }}\n            transition={{ duration: 0.5 }}\n            style={{\n              contentVisibility: 'auto', // Enable content-visibility for performance\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nOptimizedVideo.displayName = 'OptimizedVideo';\n\nexport default OptimizedVideo;\n","'use client';\r\n\r\n/**\r\n * VIDEO TESTIMONIALS COMPONENT\r\n * Customer video testimonials with playback\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport OptimizedVideo from '@/components/media/OptimizedVideo';\r\n\r\ninterface Testimonial {\r\n  id: string;\r\n  name: string;\r\n  role: string;\r\n  company: string;\r\n  videoUrl: string;\r\n  thumbnail: string;\r\n  quote: string;\r\n  rating: number;\r\n}\r\n\r\ninterface VideoTestimonialsProps {\r\n  testimonials: Testimonial[];\r\n}\r\n\r\nexport default function VideoTestimonials({ testimonials }: VideoTestimonialsProps) {\r\n  const [selectedTestimonial, setSelectedTestimonial] = useState<Testimonial | null>(null);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <h2 className=\"text-4xl font-bold text-white mb-8 text-center\">\r\n        What Our Customers Say\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {testimonials.map((testimonial) => (\r\n          <motion.div\r\n            key={testimonial.id}\r\n            className=\"bg-gray-900 rounded-xl overflow-hidden border border-gray-800 hover:border-brand-gold/50 transition-all cursor-pointer\"\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            onClick={() => setSelectedTestimonial(testimonial)}\r\n          >\r\n            {/* Thumbnail */}\r\n            <div className=\"relative aspect-video bg-black\">\r\n              <img\r\n                src={testimonial.thumbnail}\r\n                alt={testimonial.name}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/20 transition-all\">\r\n                <div className=\"w-16 h-16 bg-brand-gold rounded-full flex items-center justify-center\">\r\n                  <span className=\"text-2xl\">▶</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"p-6\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                {Array.from({ length: 5 }).map((_, i) => (\r\n                  <span\r\n                    key={i}\r\n                    className={`text-lg ${\r\n                      i < testimonial.rating ? 'text-brand-gold' : 'text-gray-600'\r\n                    }`}\r\n                  >\r\n                    ★\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              <p className=\"text-white mb-4 line-clamp-3\">{testimonial.quote}</p>\r\n              <div>\r\n                <p className=\"font-semibold text-white\">{testimonial.name}</p>\r\n                <p className=\"text-sm text-gray-400\">\r\n                  {testimonial.role}, {testimonial.company}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Video Modal */}\r\n      <AnimatePresence>\r\n        {selectedTestimonial && (\r\n          <motion.div\r\n            className=\"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={() => setSelectedTestimonial(null)}\r\n          >\r\n            <motion.div\r\n              className=\"bg-gray-900 rounded-2xl p-8 max-w-4xl w-full\"\r\n              initial={{ scale: 0.9 }}\r\n              animate={{ scale: 1 }}\r\n              exit={{ scale: 0.9 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <button\r\n                onClick={() => setSelectedTestimonial(null)}\r\n                className=\"float-right text-white text-2xl hover:text-gray-400 mb-4\"\r\n              >\r\n                ✕\r\n              </button>\r\n              \r\n              <OptimizedVideo\r\n                src={selectedTestimonial.videoUrl}\r\n                autoPlay\r\n                controls\r\n                className=\"w-full rounded-lg\"\r\n              />\r\n              \r\n              <div className=\"mt-4\">\r\n                <h3 className=\"text-2xl font-bold text-white mb-2\">\r\n                  {selectedTestimonial.name}\r\n                </h3>\r\n                <p className=\"text-gray-400\">\r\n                  {selectedTestimonial.role}, {selectedTestimonial.company}\r\n                </p>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}